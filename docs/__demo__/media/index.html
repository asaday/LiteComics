<!doctype html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Media Player - LiteComics</title><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=apple-touch-icon href=apple-touch-icon.png><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,roboto,helvetica neue,Arial,sans-serif;color:#e0e0e0;line-height:1.6;min-height:100vh}body.viewer{background:#000}#media-container{width:100%;height:100vh;background:#000;display:flex;align-items:center;justify-content:center;position:relative;flex-direction:column}#media-player{max-width:100%;max-height:100%}#media-player.video-player{width:100%;height:100%}#media-player.audio-player{width:80%;max-width:600px}#media-toolbar{position:fixed;top:0;left:0;right:0;background:rgba(0,0,0,.8);padding:10px 20px;display:flex;align-items:center;gap:15px;z-index:1000;transition:transform .3s ease;transform:translateY(-100%)}#media-toolbar.visible{transform:translateY(0)}#media-filename{flex:1;color:#fff;font-size:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.media-btn{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#fff;padding:8px 15px;cursor:pointer;border-radius:4px;font-size:14px;transition:background .2s}.media-btn:hover{background:rgba(255,255,255,.2)}#audio-info{display:none;color:#fff;text-align:center;margin-bottom:30px}#audio-info h2{margin:0 0 10px;font-size:24px}#audio-info.visible{display:block}#volume-indicator{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.8);color:#fff;padding:20px 40px;border-radius:8px;font-size:24px;opacity:0;transition:opacity .3s;pointer-events:none;z-index:9999;display:flex;align-items:center;gap:10px}#volume-indicator.visible{opacity:1}</style><body class=viewer><div id=media-container><div id=media-toolbar><button id=btn-back class=media-btn>‚Üê Back</button><div id=media-filename></div></div><div id=volume-indicator><span id=volume-icon>üîä</span>
<span id=volume-value>100%</span></div><div id=audio-info><h2>üéµ</h2><p id=audio-title></div><video id=media-player controls autoplay>
„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØ„É°„Éá„Ç£„Ç¢ÂÜçÁîü„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ</video></div><script>function fixUrl(e){return e}let currentFile="";function getFileFromURL(){const e=window.location.hash;if(e&&e.length>1){const n=decodeURIComponent(e.substring(1)),t=n.split("/").filter(e=>e);if(t.length<2)return null;const s=t[0],o=t.slice(1).join("/");return{rootName:s,relativePath:o}}return null}function isAudioFile(e){const t=[".mp3",".flac",".wav",".ogg",".m4a",".aac"],n=e.toLowerCase().split(".").pop();return t.includes("."+n)}function setupMediaPlayer(e,t){const s=document.getElementById("media-filename");s&&(s.textContent=e);const n=document.getElementById("media-player");if(n.src=t,isAudioFile(e)){n.classList.remove("video-player"),n.classList.add("audio-player");const t=document.getElementById("audio-info");t.classList.add("visible"),document.getElementById("audio-title").textContent=e}else n.classList.add("video-player"),n.classList.remove("audio-player")}function loadMedia(){try{const e=getFileFromURL();if(!e||!e.rootName||!e.relativePath)throw new Error("„Éï„Ç°„Ç§„É´„ÅåÊåáÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì");currentFile=`${e.rootName}/${e.relativePath}`;const t=e.relativePath.split("/").pop(),n=fixUrl(`/api/file/${encodeURIComponent(currentFile)}`);fetch(fixUrl(`/api/media-url/${encodeURIComponent(currentFile)}`)).then(e=>e.json()).then(e=>{if(e.custom){const t=e.name||"Â§ñÈÉ®„Ç¢„Éó„É™";if(confirm(`${t}„ÅßÈñã„Åç„Åæ„Åô„ÅãÔºü`)){window.location.href=e.url;return}}setupMediaPlayer(t,n)}).catch(e=>{setupMediaPlayer(t,n)})}catch(e){console.error("loadMedia error:",e),alert(`Error: ${e.message}`)}}function backToList(){sessionStorage.removeItem("fileListIndex"),sessionStorage.removeItem("fileListPath"),history.back()}let volumeTimer=null;function showVolume(e){const n=document.getElementById("volume-indicator"),t=document.getElementById("volume-icon"),s=document.getElementById("volume-value");e===0?t.textContent="üîá":e<.33?t.textContent="üîà":e<.67?t.textContent="üîâ":t.textContent="üîä",s.textContent=Math.round(e*100)+"%",n.classList.add("visible"),volumeTimer&&clearTimeout(volumeTimer),volumeTimer=setTimeout(()=>{n.classList.remove("visible")},1e3)}function setupToolbarVisibility(){const e=document.getElementById("media-toolbar"),t=document.getElementById("media-container");t.addEventListener("mousemove",t=>{const n=e.offsetHeight;t.clientY<n+50?e.classList.add("visible"):e.matches(":hover")||e.classList.remove("visible")}),e.addEventListener("mouseenter",()=>{e.classList.add("visible")}),e.addEventListener("mouseleave",()=>{e.classList.remove("visible")})}document.addEventListener("DOMContentLoaded",()=>{loadMedia(),document.getElementById("btn-back").addEventListener("click",backToList),setupToolbarVisibility();const e=document.getElementById("media-player");document.addEventListener("keydown",t=>{if(t.key==="Escape"||t.key==="Backspace")t.preventDefault(),document.fullscreenElement?document.exitFullscreen():backToList();else if(t.key==="Enter")t.preventDefault(),document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen();else if(t.key==="ArrowLeft")t.preventDefault(),e.currentTime=Math.max(0,e.currentTime-15);else if(t.key==="ArrowRight")t.preventDefault(),e.currentTime=Math.min(e.duration,e.currentTime+15);else if(t.key==="ArrowUp"){t.preventDefault();const n=Math.min(1,e.volume+.1);e.volume=n,showVolume(n)}else if(t.key==="ArrowDown"){t.preventDefault();const n=Math.max(0,e.volume-.1);e.volume=n,showVolume(n)}else(t.key===" "||t.key==="Spacebar")&&(t.preventDefault(),e.paused?e.play():e.pause())})})</script>